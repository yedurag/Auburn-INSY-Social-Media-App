<!DOCTYPE html>
<html>
	<head>
		<title> Auburn INSY Twitter Web App</title>
		<meta charset="utf-8"/>
		<link href="{{ url_for('static', filename='bootstrap.min.css')}}" rel='stylesheet' />
	</head>
	<body class="body-style">
		<div class="navbar-inverse navbar-default navbar-top">
			<div class="navbar-header">
				<a class="navbar-brand" href="/">Auburn INSY Twitter App</a>
			</div>
			<div class="navbar-collapse collapse">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="/">Dashboard</a></li>
					<li><a href="/TemporalAnalysis_FlowingData">Temporal Analysis on Flowing Data</a></li>
					<li><a href="/TemporalAnalysis_PersistentData">Temporal Analysis on Persistent Data</a></li>
					<li class="active"><a href="/SpatialAnalysis">SpatialAnalysis</a></li>
				</ul>
			</div>
		</div>
				
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css' rel='stylesheet' />
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-label/v0.2.1/leaflet.label.css' rel='stylesheet' />
<link href="{{ url_for('static', filename='dc.css')}}" rel='stylesheet' />
<script src="{{ url_for('static', filename='crossfilter.js')}}"></script>
<script src="{{ url_for('static', filename='d3.min.js')}}"></script>
<script src="{{ url_for('static', filename='dc.js')}}"></script>
<script src="{{ url_for('static', filename='bootstrap.min.js')}}"></script>
<script src="{{ url_for('static', filename='moment.js')}}"></script>
<link href="{{ url_for('static', filename='bootstrap.min.css')}}" rel='stylesheet' />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<style>
.body-style {
	width:90%;
	margin:0 auto;
}
#StatVizHeading1 {
	font:  15px sans-serif;
}
#StatVizline1{
    height: 20px;
    position: relative;
}

#StatVizline1:after {
    border-top: 2px solid steelblue;
    width: 100%;
    height: 50%;
    position: absolute;
    bottom: 0;
    left: 0;
    content: '';
}
#Tracktablecontainer
{
	width:100%;
    height: 100px;
	font:  12px sans-serif;
}
Tracktable{
   border: 1px solid black;
}
 
#Map1 svg{ 
	width: 100%;
    height: 500 px;
	font:  12px sans-serif;
} 
#Map2 svg{ 
	width: 100%;
    height: 500px;
	font:  12px sans-serif;
}

#Map3 svg{ 
	width: 100%;
    height: 500px;
	font:  12px sans-serif;
}

#Map4 svg{ 
	width: 100%;
    height: 500px;
	font:  12px sans-serif;
}

#Map5 svg{ 
	width: 100%;
    height: 500px;
	font:  12px sans-serif;
}

#Map6 svg{ 
	width: 100%;
    height: 500px;
	font:  12px sans-serif;
}
#container1 svg{
width: auto;
height:auto;
}


#Map1 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map1Heading {
	font:  15px sans-serif;
}

#Map2 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map2Heading {
	font:  15px sans-serif;
}

#Map3 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map3Heading {
	font:  15px sans-serif;
}

#Map4 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map4Heading {
	font:  15px sans-serif;
}

#Map5 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map5Heading {
	font:  15px sans-serif;
}




#Map6 {
    width: 1500px;
    float: left;
    height: 500px;
	
      background-color: white;
	  margin-top: 50px;
    margin-bottom: 10px;
    margin-right: 50px;
    
}

#Map6Heading {
	font:  15px sans-serif;
}



		 
</style>


<div class="row">
<div class="col-md-12">
<div id="StatVizHeading1">
	<h1>Spatial Analysis of Persistent Twitter Dataset</h1>
</div>
<div id="StatVizline1"/>
</div>
<p align = "justify">
	This page of the dashboard provides the user with Spatial distribution of tweets for each track. The maps auto update as new tweets with location information comes in.
</p>
<div class="clearfix"></div>
    <table class='table table-hover' id='Tracktable'>
        <thead>
          <tr class='header'>
            <th>Track 1</th>

			<th>Track 2</th>

			<th>Track 3</th>

			<th>Track 4</th>

			<th>Track 5</th>

			<th>Track 6</th>

          </tr>
        </thead>
    </table>
</div>
<div class="container" id ="container1">
<div id="Map1Heading" >
    <strong>Spatial Distribution Track1</strong> 
	

</div>

<div id="Map1" >
   

</div>

<div id="Map2Heading" >
    <strong>Spatial Distribution Track2</strong> 
	

</div>

<div id="Map2" >
</div>
<div id="Map3Heading" >
    <strong>Spatial Distribution Track3</strong> 
	

</div>
<div id="Map3" >	

</div>
<div id="Map4Heading" >
    <strong>Spatial Distribution Track4</strong> 
	

</div>
<div id="Map4" >
	

</div>
<div id="Map5Heading" >
    <strong>Spatial Distribution Track5</strong> 
	

</div>
<div id="Map5" >
    
	
</div>

<div id="Map6Heading" >
    <strong>Spatial Distribution Track6</strong> 
	

</div>

<div id="Map6" >

	

</div>
</div>

<script>

(function() {

var TrackTable = dc.dataTable("#Tracktable");
function tabularmagic() {

d3.json("http://127.0.0.1:5001/datastream11", function (data) {

  // format our data
  //var dtgFormat = d3.time.format("%H-%M-%S");
 

  data.forEach(function(d) { 

    d.Track_name1   = d.Track_name1;

    d.Track_name2   = d.Track_name2;

    d.Track_name3   = d.Track_name3;

    d.Track_name4   = d.Track_name4;

    d.Track_name5   = d.Track_name5;

    d.Track_name6   = d.Track_name6;
  });
  
  

 


  // Run the data through crossfilter and load our tweets
  var tracks = crossfilter(data);

  // Create dataTable dimension
  var trackDimension = tracks.dimension(function (d) {
    return d.Track_name1;
  });
  
  
  
   TrackTable.width(400).height(100)
    .dimension(trackDimension)
    .group(function(d) { return " "
     })
    .size(3)
    .columns([
     
      function(d) { return  d.Track_name1; },

	  function(d) { return  d.Track_name2; },

	  function(d) { return  d.Track_name3; },

	  function(d) { return  d.Track_name4; },

	  function(d) { return  d.Track_name5; },

	  function(d) { return  d.Track_name6; }
      
     ])
    .sortBy(function(d){ return d.Track_name1; })
    .order(d3.ascending);
	
	
	
dc.renderAll();	
  
});

}

var interval = setInterval(function(){tabularmagic()}, 25000);
})();

</script>

<script>

(function() {

L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map6', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);
  

function map6() {
d3.json("http://127.0.0.1:5001/datastream10", function(addressPoints) {

	
	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map6()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>  


<script>

(function() {
L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map1', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);

  

function map1() {
d3.json("http://127.0.0.1:5001/datastream5", function(addressPoints) {

	
	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map1()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>  

<script>
(function() {
L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map2', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);

  

function map2() {
d3.json("http://127.0.0.1:5001/datastream6", function(addressPoints) {

	
	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map2()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>  


<script>
(function() {
L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map3', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);

  

function map3() {
d3.json("http://127.0.0.1:5001/datastream7", function(addressPoints) {

	
	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map3()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>

<script>
(function() {
L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map4', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);
	

  

function map4() {
d3.json("http://127.0.0.1:5001/datastream8", function(addressPoints) {

	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map4()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>

<script>
(function() {
L.mapbox.accessToken = 'pk.eyJ1IjoieWVkdXJhZyIsImEiOiJuTkZSOE9vIn0.RE94btqnc1LqnFzzEPZoHg';
    var map = L.mapbox.map('Map5', 'yedurag.km329i82')
        .setView([50.4547, -104.6067], 2);

  

function map5() {
d3.json("http://127.0.0.1:5001/datastream9", function(addressPoints) {

	
	
    for (var i = 0; i < addressPoints.length; i++) {
        var a = addressPoints[i];
        var title = (" place: " + a["place"] + "<br/>" +  "<br/>" +  " average sentiment: " + a["sentiment"] + "<br/>" + " Detail: "+ "<br/>"+ a["tweets"].join("<br>"));
        var marker = L.marker(new L.LatLng(a["longitude"], a["latitude"]));
		 if (a["sentiment"] < 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'small'
					
	
                }))}
			else if (a["sentiment"] < 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] < 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#ff4500',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'medium'
                }))}
				
			else if (a["sentiment"] == 0 && a["count"] > 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#4682b4',
                    'marker-size': 'large'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] < 5) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'small'
                }))}
				
			else if (a["sentiment"] > 0 && a["count"] >= 5 && a["count"] < 15) {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'medium'
                }))}
				
			else {
                marker.setIcon(L.mapbox.marker.icon({
                    'marker-color': '#228B22',
                    'marker-size': 'large'
                }))}
			
        marker.bindLabel(title);
        
    

    map.addLayer(marker); } })
	
	}
	
var interval = setInterval(function(){map5()}, 25000); // Listens for the json from python every 10 seconds
})();
</script>  


</html>

